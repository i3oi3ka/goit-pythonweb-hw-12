# goit-pythonweb-hw-12

–ü—Ä–æ—î–∫—Ç –Ω–∞ FastAPI, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î API –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∑ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é, –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º –∞–≤–∞—Ç–∞—Ä—ñ–≤, JWT, —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è PostgreSQL + Alembic.

---

## üìÇ –ó–º—ñ—Å—Ç

- [–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ](#–æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ)
- [–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É](#–∑–∞–ø—É—Å–∫-–ø—Ä–æ–µ–∫—Ç—É)
- [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç—É)
- [API –º–∞—Ä—à—Ä—É—Ç–∏](#api-–º–∞—Ä—à—Ä—É—Ç–∏)
- [–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∞–≤–∞—Ç–∞—Ä—ñ–≤](#–ø—ñ–¥—Ç—Ä–∏–º–∫–∞-–∞–≤–∞—Ç–∞—Ä—ñ–≤)
- [–ü–æ–º–∏–ª–∫–∏ —Ç–∞ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∏](#–ø–æ–º–∏–ª–∫–∏-—Ç–∞-—Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∏)

---

## üîç –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è JWT
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ, —è–∫—ñ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–≤–æ—ó –∫–æ–Ω—Ç–∞–∫—Ç–∏
- –ö–æ–Ω—Ç–∞–∫—Ç–∏ –Ω–∞–ª–µ–∂–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É (–∑–≤‚Äô—è–∑–æ–∫ user ‚Üî contacts)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è email —Ç–∞ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä—ñ–≤ —á–µ—Ä–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ Cloudinary)
- –ú—ñ–≥—Ä–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ Alembic
- Docker + docker-compose –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –∑–∞–ø—É—Å–∫—É
- CORS –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É

1. –°–∫–ª–æ–Ω—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

   ```bash
   git clone https://github.com/i3oi3ka/goit-pythonweb-hw-12.git
   cd goit-pythonweb-hw-12
   ```

2. –°–∫–æ–ø—ñ—é–π `.env_example` —É `.env` —ñ –Ω–∞–ª–∞—à—Ç—É–π:

   ```bash
   cp .env_example .env
   ```

3. –ü–µ—Ä–µ–≤—ñ—Ä –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —É `.env` (PostgreSQL, JWT, Cloudinary —Ç–æ—â–æ).

4. –ó–∞–ø—É—Å—Ç–∏ —á–µ—Ä–µ–∑ Docker:

   ```bash
   docker-compose up --build
   ```

   –¶–µ –ø—ñ–¥–Ω—ñ–º–µ:

   - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL
   - –±–µ–∫–µ–Ω–¥
   - pgAdmin (–∑–∞ –ø–æ—Ç—Ä–µ–±–æ—é)

5. –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É API –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–æ –∑–∞ –∞–¥—Ä–µ—Å–æ—é `http://localhost:8000` (–∞–±–æ `http://<docker-host>:8000`).

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–£ `.env` –≤–∫–∞–∂–∏:

| –ó–º—ñ–Ω–Ω–∞                                      | –û–ø–∏—Å                                                            |
| ------------------------------------------- | --------------------------------------------------------------- |
| `POSTGRES_USER`                             | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞–∑–∏ –¥–∞–Ω–∏—Ö                                           |
| `POSTGRES_PASSWORD`                         | –ü–∞—Ä–æ–ª—å –¥–æ –ë–î                                                    |
| `POSTGRES_DB`                               | –ù–∞–∑–≤–∞ –ë–î                                                        |
| `DB_URL`                                    | URL –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î (—á–µ—Ä–µ–∑ asyncpg)                           |
| `JWT_SECRET`                                | –°–µ–∫—Ä–µ—Ç –¥–ª—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è JWT                                       |
| `JWT_ALGORITHM`                             | –ê–ª–≥–æ—Ä–∏—Ç–º JWT (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, HS256)                                 |
| `JWT_EXP_MIN`                               | –ß–∞—Å –∂–∏—Ç—Ç—è —Ç–æ–∫–µ–Ω–∞ –≤ —Ö–≤–∏–ª–∏–Ω–∞—Ö                                     |
| `CLD_NAME`, `CLD_API_KEY`, `CLD_API_SECRET` | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è Cloudinary –∞–±–æ —ñ–Ω—à–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
.
‚îú‚îÄ‚îÄ alembic/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yaml
‚îú‚îÄ‚îÄ pyproject.toml
‚îú‚îÄ‚îÄ .env_example
‚îî‚îÄ‚îÄ README.md
```

---

## üìå API –º–∞—Ä—à—Ä—É—Ç–∏ (–æ—Å–Ω–æ–≤–Ω—ñ)

| –ú–µ—Ç–æ–¥  | –®–ª—è—Ö                 | –û–ø–∏—Å                                              |
| ------ | -------------------- | ------------------------------------------------- |
| POST   | `/api/auth/register` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞                            |
| POST   | `/api/auth/login`    | –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞                                  |
| GET    | `/api/contacts/`     | –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞            |
| POST   | `/api/contacts/`     | –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç—É                         |
| GET    | `/api/contacts/{id}` | –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ id, —è–∫—â–æ –Ω–∞–ª–µ–∂–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É |
| PATCH  | `/api/contacts/{id}` | –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ id                             |
| DELETE | `/api/contacts/{id}` | –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ id                            |
| PATCH  | `/api/users/avatar`  | –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ / –æ–Ω–æ–≤–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞          |

---

## üñºÔ∏è –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∞–≤–∞—Ç–∞—Ä—ñ–≤

- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É —á–µ—Ä–µ–∑ `UploadFile` + `File(...)`
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—É —Ñ–∞–π–ª—É (image)
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Å–µ—Ä–≤—ñ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Cloudinary –∞–±–æ –ø–æ–¥—ñ–±–Ω–∏–π)
- –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –Ω–æ–≤–∏–º `avatar_url`

---

## ‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∏ —Ç–∞ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∏

| –ö–æ–¥                         | –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è                                          |
| --------------------------- | -------------------------------------------------------------- |
| `400 Bad Request`           | –ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email / —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ñ–∞–π–ª            |
| `401 Unauthorized`          | –ö–æ–ª–∏ –Ω–µ–º–∞—î —Ç–æ–∫–µ–Ω–∞ –∞–±–æ –≤—ñ–Ω –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π                           |
| `403 Forbidden`             | –°–ø—Ä–æ–±–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ —ñ–Ω—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞                  |
| `404 Not Found`             | –ö–æ–Ω—Ç–∞–∫—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –Ω–µ –Ω–∞–ª–µ–∂–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É                |
| `422 Unprocessable Entity`  | –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó, —è–∫—ñ –ø–æ–≤–µ—Ä—Ç–∞—î Pydantic                       |
| `500 Internal Server Error` | –ù–µ—Å–ø–æ–¥—ñ–≤–∞–Ω—ñ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –ø–æ–º–∏–ª–∫–∏ (—Å–µ—Ä–≤—ñ—Å upload –∞–±–æ —ñ–Ω—à–∞ –ø–æ–º–∏–ª–∫–∞) |
